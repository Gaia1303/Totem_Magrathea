<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Exo:wght@100..900&display=swap" rel="stylesheet">
    <link rel="icon" href="fav.png" type="image/x-icon">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-w76A0r01KsWbGhe7LwUwA1jtmvHjueNyw1r+El7A7hcXtLMpHcu+U3eMGGioRjEf" crossorigin="anonymous">

    <title>Arrivi e partenze</title>
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/orari-trasporti.css">
</head>
<body>
    <!-- Intestazione -->
    <div class="header">
        <img class="logo" src="img-base/logo.png">
        <div id="current-time"></div>
    </div>

    <!-- Contenuto -->
    <h2>Orari e trasporti</h2>
    <h3>Aurora Nexus</h3>

    <div class="departures-list">
        <div class="departures">
            <p class="trans-code">RAX 2848</p>
            <p class="hour-dep" id="hour-dep1"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr1"></p>
            <p class="gate">Gate 2</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">NAV 32</p>
            <p class="hour-dep" id="hour-dep2"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr2"></p>
            <p class="gate">Gate 6</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">CAPX 768</p>
            <p class="hour-dep" id="hour-dep3"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr3"></p>
            <p class="gate">Gate 1</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">RAX 2248</p>
            <p class="hour-dep" id="hour-dep4"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr4"></p>
            <p class="gate">Gate 2</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">NAV 12</p>
            <p class="hour-dep" id="hour-dep5"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr5"></p>
            <p class="gate">Gate 7</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">CAPX 776</p>
            <p class="hour-dep" id="hour-dep6"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr6"></p>
            <p class="gate">Gate 3</p>
        </div>
    
        <div class="departures">
            <p class="trans-code">RAX 2121</p>
            <p class="hour-dep" id="hour-dep7"></p>
            <img class="track-img" src="img-orari-trasporti/track.png">
            <p class="hour-arr" id="hour-arr7"></p>
            <p class="gate">Gate 2</p>
        </div>
    </div>
    
    <!-- Barra Navigazione -->
    <div class="navigation-bar">
        <img class="nav" src="img-base/barra-nav.png">
        <img class="home-button" src="img-base/home-button.png">
        <img class="back-button" src="img-base/back.button.png" onclick="window.location.href='scelta-stazioni.html';">
        <img class="accessibilità-button" src="img-base/accessibilità-button.png">
        <img class="lingue-button" src="img-base/lingue-button.png">
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12WJLzYVnvkSfZl5VVbILFL4HVWMI0o8j4ZE3e9lbiKQnBkI" crossorigin="anonymous"></script>
    <script>
     // Funzione per calcolare gli orari dinamici
     function updateDepartureTimes() {
        const now = new Date();
        let lastDeparture = new Date(now);

        // Funzione per aggiungere minuti all'orario corrente
        function addMinutes(time, minutesToAdd) {
            const newTime = new Date(time);
            newTime.setMinutes(time.getMinutes() + minutesToAdd);
            const newHours = newTime.getHours().toString().padStart(2, '0');
            const newMinutes = newTime.getMinutes().toString().padStart(2, '0');
            return `${newHours}:${newMinutes}`;
        }

        // Intervalli di tempo (in minuti) tra i vari orari di partenza
        const intervals = [15, 50, 48, 52, 43, 55, 41]; 

        const departureTimes = [];
        const arrivalTimes = [];

        // Calcolare gli orari di partenza e arrivo
        for (let i = 0; i < intervals.length; i++) {
            let departureTime = addMinutes(lastDeparture, intervals[i]);
            departureTimes.push(departureTime);

            // Orario di arrivo: 30 minuti dopo la partenza
            let arrivalTime = addMinutes(new Date(`1970-01-01T${departureTime}:00`), 32);
            arrivalTimes.push(arrivalTime);

            // Impostare l'orario di partenza per il prossimo calcolo
            lastDeparture = new Date(lastDeparture.setMinutes(lastDeparture.getMinutes() + intervals[i]));
        }

        // Aggiornare gli orari dinamici nelle rispettive posizioni
        for (let i = 0; i < departureTimes.length; i++) {
            document.getElementById(`hour-dep${i + 1}`).textContent = departureTimes[i];
            document.getElementById(`hour-arr${i + 1}`).textContent = arrivalTimes[i];
        }
    }

    // Funzione per aggiornare l'orario corrente
    function updateTime() {
        const now = new Date();
        const hours = now.getHours().toString().padStart(2, '0');
        const minutes = now.getMinutes().toString().padStart(2, '0');
        const timeString = `${hours}:${minutes}`;
        document.getElementById('current-time').textContent = timeString;
    }

    // Aggiorna l'orario corrente ogni minuto
    setInterval(updateTime, 60000);

    // Imposta subito l'orario corrente all'inizio
    updateTime();

    // Calcolare e impostare gli orari al caricamento della pagina
    window.onload = updateDepartureTimes;
    </script>

</body>
</html>